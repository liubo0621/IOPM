<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybaits-3-mapper.dtd"><mapper namespace="cn.com.pattek.Subject.dao.SubjectDao">		<resultMap id="TabIopmSubject" type="cn.com.pattek.Subject.entity.TabIopmSubject">		<result property="id" column="ID"/>		<result property="name" column="NAME"/>		<result property="startTime" column="START_TIME"/>		<result property="endTime" column="END_TIME"/>		<result property="keyword1" column="KEYWORD1"/>		<result property="keyword2" column="KEYWORD2"/>	</resultMap>		 <insert id="addSubject" parameterType="cn.com.pattek.Subject.entity.TabIopmSubject">		<selectKey resultType="java.lang.Long" keyProperty="id"			order="BEFORE">			select SEQ_SUBJECT.nextval from dual	  </selectKey>		insert into tab_iopm_subject		<trim prefix="(" suffix=")" suffixOverrides=",">			<if test="id!=null">				id,			</if>			<if test="name!=null">				name,			</if>			<if test="startTime!=null">				startTime,			</if>			<if test="endTime!=null">				endTime,			</if>			<if test="keyword1!=null">				keyword1,			</if>			<if test="keyword2!=null">				keyword2,			</if>		</trim>		<trim prefix="values (" suffix=")" suffixOverrides=",">			<if test="id!=null">				#{id},			</if>			<if test="name!=null">				#{name},			</if>			<if test="startTime!=null">				#{startTime},			</if>			<if test="endTime!=null">				#{endTime},			</if>			<if test="keyword1!=null">				#{keyword1},			</if>			<if test="keyword2!=null">				#{keyword2},			</if>		</trim>	</insert>	<!-- 添加 -->		<!-- <insert id="addSubject" parameterType="cn.com.pattek.Subject.entity.TabIopmSubject">	<selectKey resultType="java.lang.Long" keyProperty="id"			order="BEFORE">			select SEQ_SUBJECT.nextval from dual 	  </selectKey>	insert into 		tab_iopm_subject(ID,NAME,START_TIME,END_TIME,KEYWORD1,KEYWORD2) (#{id},#{name},#{startTime},#{endTime},#{keyword1},#{keyword2})	</insert> -->		<!-- 查询所有主题 -->	<select id="selectAllSubject" resultType="java.util.HashMap">	 select ID,NAME from TAB_IOPM_SUBJECT 	</select>						<!-- 查询在subject表中的开始检测时间 -->	<select id="subjectStart" parameterType="java.lang.Long" resultType="java.lang.String">		select		 	to_char(start_time,'yyyy-mm-dd hh24:mi:ss') 		 from 		 	tab_iopm_subject 		 where id=#{id}	</select>		<!-- 查询在subject表中的结束检测时间 -->	<select id="subjectEndTime" parameterType="java.lang.Long" resultType="java.lang.String">		select		 	to_char(end_time,'yyyy-mm-dd hh24:mi:ss') 		 from 		 	tab_iopm_subject 		 where id=#{id}	</select>			<!-- 查询在subject表中根据id查询的关键字 keyword1 -->	<select id="subjectKeyWord1" parameterType="java.lang.Long" resultType="java.lang.String">		select 			KEYWORD1,START_TIME 		from 			TAB_IOPM_SUBJECT 		where 			id=#{id}	</select>	<!-- 查询出最后一次出现的时间 -->	<select id="subjectEnd" parameterType="java.lang.String" resultType="java.lang.String">		select 			to_char(max(release_time),'yyyy-mm-dd hh24:mi:ss') 		from 			tab_iopm_article_info a 		where 			a.title LIKE concat(concat('%',#{keyword1}),'%') 	</select>		<!-- 查询出第一次出现的时间 -->	<select id="subjectFirst" parameterType="java.lang.String" resultType="java.lang.String">		select 			to_char(min(release_time),'yyyy-mm-dd hh24:mi:ss')	 		from 			tab_iopm_article_info a 		where 			title LIKE concat(concat('%',#{keyword1}),'%') 	</select>	<!-- 新闻 -->	<select id="news" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =1	</select>	<!-- 微博-->	<select id="weibo" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =3	</select>	<!-- 微信-->	<select id="weixin" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =2	</select>	<!-- 论坛 -->	<select id="luntan" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%') and info_type =4	</select>	<!-- 视频 -->	<select id="video" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =8	</select>	<!-- 站点 -->	<select id="webName" parameterType="java.lang.String" resultType="java.lang.String">		select 			website_name 		from 			Tab_Iopm_Article_Info 		where 			release_time = to_date(#{time},'yyyy-mm-dd hh24:mi:ss')	</select>		<!-- 标题 -->	<select id="titleName" parameterType="java.lang.String" resultType="java.lang.String">		select 			title 		from 			Tab_Iopm_Article_Info 		where 			release_time = to_date(#{time},'yyyy-mm-dd hh24:mi:ss')	</select>	<!-- 最高峰时间 -->	<select id="peakTime" parameterType="java.lang.String" resultType="java.lang.String">		select 			to_char(min(RELEASE_TIME),'yyyy-mm-dd hh24:mi:ss'),max(count(info_type)) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%') group by RELEASE_TIME		</select>		<!-- 查询出各个信息,发布时间(YYYY-MM-dd),以及数量 -->	<select id="getTimeAndCount" parameterType="java.lang.String" resultType="java.util.HashMap">		SELECT 			TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME,t.info_type,count(info_type)  info_type_count		FROM   			tab_iopm_article_info T 		where 			title like concat(concat('%',#{keyword1}),'%')			GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD'),T.info_type 			ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>				<!-- 查出主流媒体数量以及时间 -->	<select id="getTimeAndVipCount" parameterType="java.lang.String" resultType="java.util.HashMap">		SELECT 			TO_CHAR(release_time,'YYYY-MM-DD') TIME ,count(IS_VIP) vipCount		FROM   			tab_iopm_article_info T 				where 			title like concat(concat('%',#{keyword1}),'%') and T.IS_VIP=1				GROUP BY TO_CHAR(release_time,'YYYY-MM-DD')		ORDER BY TO_CHAR(release_time,'YYYY-MM-DD') ASC NULLS LAST	</select>		<!-- 查出总信息量的时间,以及每天总信息量,用在阶段演化 -->	<select id="sumInfo" parameterType="java.lang.String" resultType="java.util.HashMap">	        select TO_CHAR( release_time,'YYYY-MM-DD') Time,count(title) sumCount    from tab_iopm_article_info where          title like concat(concat('%',#{keyword1}),'%')    GROUP BY TO_CHAR( release_time,'YYYY-MM-DD')    ORDER BY TO_CHAR( release_time,'YYYY-MM-DD')asc	</select>		<!-- 主流媒体负面信息时间和数量 -->	<select id="getTimeAndEmotionCount" parameterType="java.lang.String" resultType="java.util.HashMap">		SELECT 			TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME ,count(EMOTION) bad_emotion		FROM   			tab_iopm_article_info T 				where 			title like concat(concat('%',#{keyword1}),'%') and T.IS_VIP=1 and EMOTION = 2		GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD')		ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>	<!-- 微信平台传播趋势 -->	<select id="getWeiXin" parameterType="java.lang.String" resultType="java.util.HashMap">	    SELECT 	      TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME ,count(info_type) weixinCount	    FROM   	      tab_iopm_article_info T     	    where 	      title like  concat(concat('%',#{keyword1}),'%') and T.Info_Type=2   	   	  GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD')	      ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>		<select id="getWeiBo" parameterType="java.lang.String" resultType="java.util.HashMap">	    SELECT 	      TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME ,count(info_type) weiboCount	    FROM   	      tab_iopm_article_info T     	    where 	      title like  concat(concat('%',#{keyword1}),'%') and T.Info_Type=3   	   	  GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD')	      ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>		<select id="getMainstreamMedia" parameterType="java.lang.String" resultType="java.util.HashMap">	  SELECT * 	  FROM	  ( SELECT         	max(WEBSITE_NAME) WEBSIT_NAME,count(WEBSITE_NAME) info_count    	FROM         		tab_iopm_article_info T         	WHERE       		title like concat(concat('%',#{keyword1}),'%') and T.IS_VIP=1    		GROUP BY website_name     		ORDER BY info_count DESC)     WHERE        rownum&lt;=10	</select>		<select id="getMainstreamMediaAndEmotionBad" parameterType="java.lang.String" resultType="java.util.HashMap">	  SELECT * 	  FROM	  ( SELECT         	max(WEBSITE_NAME) WEBSIT_NAME,count(WEBSITE_NAME) info_count_bad    	FROM         		tab_iopm_article_info T         	WHERE       		title like concat(concat('%',#{keyword1}),'%') and T.IS_VIP=1 and emotion=2    		GROUP BY website_name     		ORDER BY info_count_bad DESC)     WHERE        rownum&lt;=10	</select>			</mapper>
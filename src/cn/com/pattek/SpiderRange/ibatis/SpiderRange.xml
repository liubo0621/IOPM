<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybaits-3-mapper.dtd"><mapper namespace="cn.com.pattek.SpiderRange.dao.SpiderRangeDao">		<!-- 查询被监控的站点量 -->		<select id="selectMorsSite"  resultType="java.util.HashMap" >		select 			count(*) count, mointor_status mors		from 			TAB_IOPM_SITE t 			group by mointor_status		</select>				<!-- 查询覆盖的站点量 -->		<select id="selectCoverSite"  resultType="java.lang.Integer" >		select count(*) count from TAB_IOPM_SITE		</select>			<!-- 查询各区域的站点覆盖量-->		<select id="selectRegionSite"  resultType="java.util.HashMap" >		select 			count(distinct t.position) count, p.province		from 			TAB_IOPM_SITE t, TAB_IOPM_PROVINCE p		where 			t.position = p.id			group by t.position, p.province		</select>	<!-- 添加站点 -->	<insert id="addSite" parameterType="java.util.Map">		<selectKey resultType="java.lang.Long" keyProperty="id"			order="BEFORE">			select SEQ_IOPM_SITE.nextval from dual		</selectKey>		insert into TAB_IOPM_SITE		<trim prefix="(" suffix=")" suffixOverrides=",">			<if test="id!=null">				id,			</if>			<if test="name!=null">				name,			</if>			<if test="position!=null">				position,			</if>			<if test="url!=null">				url,			</if>			<if test="spiderFrequence!=null">				spider_frequence,			</if>			<if test="remark!=null">				remark,			</if>			<if test="domain!=null">				domain,			</if>		</trim>		<trim prefix="values (" suffix=")" suffixOverrides=",">			<if test="id!=null">				#{id},			</if>			<if test="name!=null">				#{name},			</if>			<if test="position!=null">				#{position},			</if>			<if test="url!=null">				#{url},			</if>			<if test="remark!=null">				#{remark},			</if>			<if test="domain!=null">				#{domain},			</if>		</trim>	</insert>	<!-- 删除站点 -->	<delete id="deleteSite" parameterType="java.lang.Long">		delete		from		tab_iopm_site		where		id=#{id}	</delete>	<!-- 修改站点 -->	<update id="updateSite" parameterType="java.util.Map">		update tab_iopm_site		<set>			<if test="name!=null">				name=#{name},			</if>			<if test="position!=null">				position=#{position},			</if>			<if test="url!=null">				url=#{url},			</if>			<if test="spiderFrequence!=null">				spider_frequence=#{spiderFrequence},			</if>			<if test="remark!=null">				remark=#{remark},			</if>			<if test="domain!=null">				domain=#{domain},			</if>		</set>		where id=#{id}	</update><!-- 分页查询 page是当前页 size 是每页显示数据 -->	<select id="selectSite" parameterType="java.util.Map"		resultType="java.util.Map">		select 			* 		from			(select rownum r, a.* from(select d.dict_name,t.id,t.name,p.province,t.classify,t.url,t.total_msg, to_char(t.create_time,'yyyy-MM-dd HH24:mi:ss') createTime, to_char(t.spider_time,'yyyy-MM-dd HH24:mi:ss') spiderTime,t.spider_frequence,t.spider_status,t.mointor_status,t.domain,to_char(t.remark) remark from TAB_IOPM_SITE t,TAB_IOPM_DICTIONARY d,TAB_IOPM_PROVINCE p			<where>			<if test="name!=null">				t.name like  concat(concat('%',#{name}),'%')			</if>			<if test="position!=null">				and t.position =#{position}				and p.id=#{position}			</if>			<if test="classify!=null">			and t.classify =#{classify} 			</if>			    and d.type_id=2 and t.classify=d.code order by t.spider_time						</where>		) a where 					rownum &lt;= #{page} *#{size} )		where r &gt; (#{page} -1) * #{size}			</select>	<select id="selectTotalCountSite" parameterType="java.util.Map" resultType="java.lang.Integer">		select count(*) from TAB_IOPM_SITE t,TAB_IOPM_DICTIONARY d			<where>			<if test="name!=null">				t.name like  concat(concat('%',#{name}),'%')			</if>			<if test="position!=null">				and t.position =#{position}			</if>			<if test="classify!=null">			and t.classify =#{classify} 			</if>			    and d.type_id=2 and t.classify=d.code order by t.spider_time						</where>	</select>		<!-- 查询所有省份 -->	<select id="selectAllProvince" resultType="java.util.Map">		select 			* 		from 			TAB_IOPM_PROVINCE t	</select>	</mapper>
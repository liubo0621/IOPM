<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybaits-3-mapper.dtd"><mapper namespace="cn.com.pattek.Subject.dao.SubjectDao">		<resultMap id="TabIopmSubject" type="cn.com.pattek.Subject.entity.TabIopmSubject">		<result property="id" column="ID"/>		<result property="name" column="NAME"/>		<result property="startTime" column="START_TIME"/>		<result property="endTime" column="END_TIME"/>		<result property="keyword1" column="KEYWORD1"/>		<result property="keyword2" column="KEYWORD2"/>		<result property="updateTime" column="UPDATE_TIME"/>		<result property="recordTime" column="RECORD_TIME"/>			</resultMap>			<!-- 查询专题所有信息+分页查询 --> 	 <select id="selectSubjectAll" parameterType="java.util.HashMap"  resultType="cn.com.pattek.Subject.entity.TabIopmSubject">		select * from		(select rownum r, id, name, to_char(start_time, 'yyyy-mm-dd hh24:mi:ss'), 	      to_char(end_time, 'yyyy-mm-dd hh24:mi:ss'), keyword1, keyword2, 	      record_time, update_time from TAB_IOPM_SUBJECT t where 			<if test="start!=-1">				<![CDATA[				rownum <=(#{start} * #{limit})				]]>			</if> ) where 1=1 						<if test="limit!=-1">and 				<![CDATA[				r >= (#{start} - 1)* #{limit} +1 				]]>			</if>   	</select>   		<!-- 查询subject总数 --> 	<select id="selectTotalCount" resultType="java.lang.Integer">		select count(*) from TAB_IOPM_SUBJECT 		</select>						<!-- 修改专题信息-->	 <update id="updateSubjectOne" parameterType="java.util.HashMap">		update tab_iopm_subject		<set>			<if test="name!=null">				name=#{name},			</if>			<if test="start_Time!=null">				start_Time=#{startTime},			</if>			<if test="end_Time!=null">				end_Time=#{endTime},			</if>			<if test="keyword1!=null">				keyword1=#{keyword1},			</if>			<if test="keyword2!=null">				keyword2=#{keyword2},			</if>			<if test="1==1">				update_time=sysdate,			</if>		</set>		where id=#{id}	</update>	 				<!-- 根据id删除专题 --> 	<delete id="delectSubject" parameterType="java.lang.Long">		delete from tab_iopm_subject where id=#{id}    </delete> 				<!-- 查询线索id和name-->	<select id="selectZeroIdAndName" resultType="java.util.HashMap">     select Zero_id, zero_name from TAB_IOPM_ZERO_CLUES_CLASSIFY where Zero_id !=7 and Zero_id !=5	</select>			<!-- 查出类别ID和类别名称 -->	<select id="selectClue" resultType="java.util.HashMap">     select code, dict_name from TAB_IOPM_DICTIONARY where type_ID = 2	</select>		<!-- 情感波动 -->	<select id="EmotionBoDong" parameterType="java.lang.String" resultType="java.util.HashMap">    SELECT TO_CHAR(T.record_time,'YYYY-MM-DD') TIME，count(emotion) emotionCount, emotion    FROM         tab_iopm_article_info T         where       ${value}    GROUP BY TO_CHAR(T.record_time,'YYYY-MM-DD')，emotion    ORDER BY TO_CHAR(T.record_time,'YYYY-MM-DD') ASC NULLS LAST    	</select>		<!-- 情感波动比例 -->	<select id="EmotionBoDongBiLi" parameterType="java.lang.String" resultType="java.util.HashMap">	SELECT count(EMOTION) emotionCount,EMOTION EMOTIONTYPE FROM 	tab_iopm_article_info T         where       ${value} and emotion>0    GROUP BY emotion    ORDER BY emotion	</select>			<!-- 情感波动 概述-总数-->	<select id="SelectNum" parameterType="java.lang.String" resultType="java.lang.Integer">	    SELECT count(EMOTION) FROM         tab_iopm_article_info T         where       ${value} and emotion>0	</select>		<!-- 通过id查询主题 -->	<select id="selectTitle" parameterType="java.lang.Long" resultType="java.lang.String">		select 			NAME 		from 			TAB_IOPM_SUBJECT 		where 			id = #{id}	</select>	 <insert id="addSubject" parameterType="cn.com.pattek.Subject.entity.TabIopmSubject">		<selectKey resultType="java.lang.Long" keyProperty="id"			order="BEFORE">			select SEQ_SUBJECT.nextval from dual	  </selectKey>		insert into tab_iopm_subject		<trim prefix="(" suffix=")" suffixOverrides=",">			<if test="id!=null">				id,			</if>			<if test="name!=null">				name,			</if>			<if test="startTime!=null">				start_Time,			</if>			<if test="endTime!=null">				end_Time,			</if>			<if test="keyword1!=null">				keyword1,			</if>			<if test="keyword2!=null">				keyword2,			</if>		</trim>		<trim prefix="values (" suffix=")" suffixOverrides=",">			<if test="id!=null">				#{id},			</if>			<if test="name!=null">				#{name},			</if>			<if test="startTime!=null">				to_date(#{startTime}, 'yyyy-mm-dd hh24:mi:ss'),			</if>			<if test="endTime!=null">				to_date(#{endTime}, 'yyyy-mm-dd hh24:mi:ss'),			</if>			<if test="keyword1!=null">				#{keyword1},			</if>			<if test="keyword2!=null">				#{keyword2},			</if>		</trim>	</insert>		<!-- 查询所有主题 -->	<select id="selectAllSubject" resultType="java.util.HashMap">	 select 	 	ID,NAME 	 from 	 	TAB_IOPM_SUBJECT order by update_time　desc	</select>		<!-- 通过专题名称查询id -->	<select id="selectSubjectByName" parameterType="java.lang.String" resultType="java.util.HashMap">	select 		ID 	from 		TAB_IOPM_SUBJECT 	WHERE		NAME= #{subjectname}	</select>		<!-- 模糊查询给返回一个列表,用于用户提示 -->	<select id="selectLikeSubject" parameterType="java.lang.String" resultType="java.util.HashMap">	select 		ID,NAME 	from 		TAB_IOPM_SUBJECT	where		NAME LIKE concat(concat('%',#{subjectname}),'%')	</select>	<!-- 通过主题查询 id 和name -->	<select id="searchSubject" parameterType="java.lang.String" resultType="java.util.HashMap">	select 		ID,NAME	from 		TAB_IOPM_SUBJECT	where		NAME= #{subjectname}	</select>		<!-- 查询在subject表中的开始检测时间 -->	<select id="subjectStart" parameterType="java.lang.Long" resultType="java.lang.String">		select		 	to_char(start_time,'yyyy-mm-dd hh24:mi:ss') 		 from 		 	tab_iopm_subject 		 where id=#{id}	</select>		<!-- 查询在subject表中的结束检测时间 -->	<select id="subjectEndTime" parameterType="java.lang.Long" resultType="java.lang.String">		select		 	to_char(end_time,'yyyy-mm-dd hh24:mi:ss') 		 from 		 	tab_iopm_subject 		 where id=#{id}	</select>			<!-- 查询在subject表中根据id查询的关键字 keyword1 -->	<select id="subjectKeyWord1" parameterType="java.lang.Long" resultType="java.lang.String">		select 			KEYWORD1,START_TIME 		from 			TAB_IOPM_SUBJECT 		where 			id=#{id}	</select>	<!-- 查询出最后一次出现的时间 -->	<select id="subjectEnd" parameterType="java.lang.String" resultType="java.lang.String">		select 			to_char(max(release_time),'yyyy-mm-dd hh24:mi:ss') 		from 			tab_iopm_article_info a 		where 			a.title LIKE concat(concat('%',#{keyword1}),'%') 	</select>		<!-- 查询出第一次出现的时间 -->	<select id="subjectFirst" parameterType="java.lang.String" resultType="java.lang.String">		select 			to_char(min(release_time),'yyyy-mm-dd hh24:mi:ss')	 		from 			tab_iopm_article_info a 		where 			title LIKE concat(concat('%',#{keyword1}),'%') 	</select>	<!-- 新闻 -->	<select id="news" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =1	</select>	<!-- 微博-->	<select id="weibo" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =3	</select>	<!-- 微信-->	<select id="weixin" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =2	</select>	<!-- 论坛 -->	<select id="luntan" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%') and info_type =4	</select>	<!-- 视频 -->	<select id="video" parameterType="java.lang.String" resultType="java.lang.Integer">		select 			count(info_type) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%')  and info_type =8	</select>	<!-- 站点 -->	<select id="webName" parameterType="java.lang.String" resultType="java.lang.String">		select 			website_name 		from 			Tab_Iopm_Article_Info 		where 			release_time = to_date(#{time},'yyyy-mm-dd hh24:mi:ss')	</select>		<!-- 标题 -->	<select id="titleName" parameterType="java.lang.String" resultType="java.lang.String">		select 			title 		from 			Tab_Iopm_Article_Info 		where 			release_time = to_date(#{time},'yyyy-mm-dd hh24:mi:ss')	</select>	<!-- 最高峰时间 -->	<select id="peakTime" parameterType="java.lang.String" resultType="java.lang.String">		select 			to_char(min(RELEASE_TIME),'yyyy-mm-dd hh24:mi:ss'),max(count(info_type)) 		from 			tab_iopm_article_info 		where 			title LIKE concat(concat('%',#{keyword1}),'%') group by RELEASE_TIME		</select>		<!-- 查询出各个信息,发布时间(YYYY-MM-dd),以及数量 -->	<select id="getTimeAndCount" parameterType="java.lang.String" resultType="java.util.HashMap">		SELECT 			TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME,t.info_type,count(info_type)  info_type_count		FROM   			tab_iopm_article_info T 		where 			title like concat(concat('%',#{keyword1}),'%')			GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD'),T.info_type 			ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>				<!-- 查出主流媒体数量以及时间 -->	<select id="getTimeAndVipCount" parameterType="java.lang.String" resultType="java.util.HashMap">		SELECT 			TO_CHAR(release_time,'YYYY-MM-DD') TIME ,count(IS_VIP) vipCount		FROM   			tab_iopm_article_info T 				where 			title like concat(concat('%',#{keyword1}),'%') and T.IS_VIP=1				GROUP BY TO_CHAR(release_time,'YYYY-MM-DD')		ORDER BY TO_CHAR(release_time,'YYYY-MM-DD') ASC NULLS LAST	</select>		<!-- 查出总信息量的时间,以及每天总信息量,用在阶段演化 -->	<select id="sumInfo" parameterType="java.lang.String" resultType="java.util.HashMap">	        select TO_CHAR( release_time,'YYYY-MM-DD') Time,count(title) sumCount    from tab_iopm_article_info where          title like concat(concat('%',#{keyword1}),'%')    GROUP BY TO_CHAR( release_time,'YYYY-MM-DD')    ORDER BY TO_CHAR( release_time,'YYYY-MM-DD')asc	</select>		<!-- 主流媒体负面信息时间和数量 -->	<select id="getTimeAndEmotionCount" parameterType="java.lang.String" resultType="java.util.HashMap">		SELECT 			TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME ,count(EMOTION) bad_emotion		FROM   			tab_iopm_article_info T 				where 			title like concat(concat('%',#{keyword1}),'%') and T.IS_VIP=1 and EMOTION = 2		GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD')		ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>	<!-- 微信平台传播趋势 -->	<select id="getWeiXin" parameterType="java.lang.String" resultType="java.util.HashMap">	    SELECT 	      TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME ,count(info_type) weixinCount	    FROM   	      tab_iopm_article_info T     	    where 	      title like  concat(concat('%',#{keyword1}),'%') and T.Info_Type=2   	   	  GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD')	      ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>		<select id="getWeiBo" parameterType="java.lang.String" resultType="java.util.HashMap">	    SELECT 	      TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') TIME ,count(info_type) weiboCount	    FROM   	      tab_iopm_article_info T     	    where 	      title like  concat(concat('%',#{keyword1}),'%') and T.Info_Type=3   	   	  GROUP BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD')	      ORDER BY TO_CHAR(T.RELEASE_TIME,'YYYY-MM-DD') ASC NULLS LAST	</select>	<!-- 主流媒体排名前十 -->	<select id="getMainstreamMedia" parameterType="java.lang.String" resultType="java.util.HashMap">	  SELECT * 	  FROM	  ( SELECT         	max(WEBSITE_NAME) WEBSIT_NAME,count(WEBSITE_NAME) info_count    	FROM         		tab_iopm_article_info T         	WHERE       		${value} and T.IS_VIP=1    		GROUP BY website_name     		ORDER BY info_count DESC)     WHERE        rownum&lt;=10	</select>	<!-- 主流媒体负面排名前十 -->	<select id="getMainstreamMediaAndEmotionBad" parameterType="java.lang.String" resultType="java.util.HashMap">	  SELECT * 	  FROM	  ( SELECT         	max(WEBSITE_NAME) WEBSIT_NAME,count(WEBSITE_NAME) info_count_bad    	FROM         		tab_iopm_article_info T         	WHERE       		${value} and T.IS_VIP=1 and emotion=2    		GROUP BY website_name     		ORDER BY info_count_bad DESC)     WHERE        rownum&lt;=10	</select>			</mapper>